
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "reference/visualization/generated/optuna.visualization.plot_terminator_improvement.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_reference_visualization_generated_optuna.visualization.plot_terminator_improvement.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_reference_visualization_generated_optuna.visualization.plot_terminator_improvement.py:


plot_terminator_improvement
===========================

.. autofunction:: optuna.visualization.plot_terminator_improvement

The following code snippet shows how to plot improvement potentials,
together with cross-validation errors.

.. GENERATED FROM PYTHON SOURCE LINES 12-44



.. raw:: html
    :file: images/sphx_glr_optuna.visualization.plot_terminator_improvement_001.html


.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    /home/runner/work/dash-docset-optuna/dash-docset-optuna/optuna/docs/visualization_examples/optuna.visualization.plot_terminator_improvement.py:42: ExperimentalWarning:

    plot_terminator_improvement is experimental (supported from v3.2.0). The interface can change in the future.

    /opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/optuna/visualization/_terminator_improvement.py:93: ExperimentalWarning:

    RegretBoundEvaluator is experimental (supported from v3.2.0). The interface can change in the future.

    /opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/optuna/visualization/_terminator_improvement.py:98: ExperimentalWarning:

    CrossValidationErrorEvaluator is experimental (supported from v3.2.0). The interface can change in the future.

      0%|          | 0/30 [00:00<?, ?it/s]     17%|█▋        | 5/30 [00:00<00:00, 46.73it/s]     33%|███▎      | 10/30 [00:00<00:00, 36.11it/s]     47%|████▋     | 14/30 [00:00<00:00, 33.38it/s]     60%|██████    | 18/30 [00:00<00:00, 26.41it/s]     73%|███████▎  | 22/30 [00:00<00:00, 27.87it/s]     83%|████████▎ | 25/30 [00:00<00:00, 26.39it/s]     93%|█████████▎| 28/30 [00:01<00:00, 25.16it/s]    100%|██████████| 30/30 [00:01<00:00, 25.54it/s]






|

.. code-block:: Python


    from lightgbm import LGBMClassifier
    from sklearn.datasets import load_wine
    from sklearn.model_selection import cross_val_score
    from sklearn.model_selection import KFold
    import optuna
    from plotly.io import show
    from optuna.terminator import report_cross_validation_scores
    from optuna.visualization import plot_terminator_improvement


    def objective(trial):
        X, y = load_wine(return_X_y=True)
        clf = LGBMClassifier(
            reg_alpha=trial.suggest_float("reg_alpha", 1e-8, 10.0, log=True),
            reg_lambda=trial.suggest_float("reg_lambda", 1e-8, 10.0, log=True),
            num_leaves=trial.suggest_int("num_leaves", 2, 256),
            colsample_bytree=trial.suggest_float("colsample_bytree", 0.4, 1.0),
            subsample=trial.suggest_float("subsample", 0.4, 1.0),
            subsample_freq=trial.suggest_int("subsample_freq", 1, 7),
            min_child_samples=trial.suggest_int("min_child_samples", 5, 100),
        )
        scores = cross_val_score(clf, X, y, cv=KFold(n_splits=5, shuffle=True))
        report_cross_validation_scores(trial, scores)
        return scores.mean()


    study = optuna.create_study()
    study.optimize(objective, n_trials=30)

    fig = plot_terminator_improvement(study, plot_error=True)
    show(fig)


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 2.927 seconds)


.. _sphx_glr_download_reference_visualization_generated_optuna.visualization.plot_terminator_improvement.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: optuna.visualization.plot_terminator_improvement.ipynb <optuna.visualization.plot_terminator_improvement.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: optuna.visualization.plot_terminator_improvement.py <optuna.visualization.plot_terminator_improvement.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: optuna.visualization.plot_terminator_improvement.zip <optuna.visualization.plot_terminator_improvement.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
