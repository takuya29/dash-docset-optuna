
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "tutorial/20_recipes/011_journal_storage.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_tutorial_20_recipes_011_journal_storage.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_tutorial_20_recipes_011_journal_storage.py:


.. _journal_storage:

(File-based) Journal Storage
============================

Optuna provides :class:`~optuna.storages.JournalStorage`. With this feature, you can easily run a
distributed optimization over network using NFS as the shared storage, without need for setting up
RDB or Redis.

.. GENERATED FROM PYTHON SOURCE LINES 12-37

.. code-block:: Python


    import logging
    import sys

    import optuna


    # Add stream handler of stdout to show the messages
    optuna.logging.get_logger("optuna").addHandler(logging.StreamHandler(sys.stdout))
    study_name = "example-study"  # Unique identifier of the study.
    file_path = "./optuna_journal_storage.log"
    storage = optuna.storages.JournalStorage(
        optuna.storages.journal.JournalFileBackend(file_path),  # NFS path for distributed optimization
    )

    study = optuna.create_study(study_name=study_name, storage=storage)


    def objective(trial):
        x = trial.suggest_float("x", -10, 10)
        return (x - 2) ** 2


    study.optimize(objective, n_trials=3)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    A new study created in Journal with name: example-study
    Trial 0 finished with value: 29.116132485777054 and parameters: {'x': 7.395936664359308}. Best is trial 0 with value: 29.116132485777054.
    Trial 1 finished with value: 36.67903801429138 and parameters: {'x': 8.056322152452871}. Best is trial 0 with value: 29.116132485777054.
    Trial 2 finished with value: 94.35887746313537 and parameters: {'x': -7.71384977561087}. Best is trial 0 with value: 29.116132485777054.




.. GENERATED FROM PYTHON SOURCE LINES 38-41

Although the optimization in this example is too short to run in parallel, you can extend this
example to write a optimization script which can be run in parallel.


.. GENERATED FROM PYTHON SOURCE LINES 43-48

.. note::
    In a Windows environment, an error message "A required privilege is not held by the client"
    may appear. In this case, you can solve the problem with creating storage by specifying
    :class:`~optuna.storages.journal.JournalFileOpenLock`. See the reference of
    :class:`~optuna.storages.JournalStorage` for any details.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 0.014 seconds)


.. _sphx_glr_download_tutorial_20_recipes_011_journal_storage.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 011_journal_storage.ipynb <011_journal_storage.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 011_journal_storage.py <011_journal_storage.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: 011_journal_storage.zip <011_journal_storage.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
